<!DOCTYPE html>
<html>
  <head><title>Autenticación completada</title></head>
  <body style="background:#111;color:#fff;text-align:center;padding-top:100px;font-family:sans-serif">
    <h1>✅ Autenticación completada</h1>
    <p>Puedes cerrar esta ventana</p>
    <button style="padding:10px 20px;font-size:16px" onclick="window.location.href='unity:close'">Cerrar</button>

    <script>
      const params = new URLSearchParams(window.location.search);
      const code = params.get("code");
      const error = params.get("error");

      if (code) {
        // Aquí no hace falta setTimeout si quieres inmediatismo
        window.location.href = 'unity:' + code;
      } else if (error) {
        window.location.href = 'unity:error:' + error;
      } else {
        document.body.innerHTML = "<h1>❌ Error</h1><p>No se recibió código OAuth</p>";
      }
    </script>
  </body>
</html>
